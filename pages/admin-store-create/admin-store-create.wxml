<view class="page">
  <view class="title">{{pageTitle}}</view>
  <view class="form">
    <input class="input" placeholder="门店名称" maxlength="20" value="{{name}}" bindinput="onNameInput" />
    <input class="input" placeholder="门店编码" value="{{code}}" bindinput="onCodeInput" />
    <input class="input" placeholder="联系电话" type="number" maxlength="11" value="{{phone}}" bindinput="onPhoneInput" />
    <input class="input" placeholder="地址" maxlength="40" value="{{address}}" bindinput="onAddressInput" />
    <picker class="picker" mode="selector" range="{{statusOptions}}" value="{{statusIndex}}" bindchange="onStatusChange">
      <view class="picker-inner">状态：{{statusOptions[statusIndex]}}</view>
    </picker>

    <view class="manager-section">
      <view class="manager-header" bindtap="toggleManagerPanel">
        <text>店长设置（多选）</text>
        <text class="chevron">{{ showManagerPanel ? '▲' : '▼' }}</text>
      </view>
      <view class="manager-actions">
        <text class="hint">已选 {{ managerSelected.length }} 人</text>
      </view>
      <view wx:if="{{showManagerPanel}}" class="manager-list">
        <checkbox-group bindchange="onManagerChange">
          <block wx:for="{{users}}" wx:key="_id">
            <label class="manager-item">
              <checkbox value="{{item.uid}}" checked="{{managerSelectedMap[item.uid]}}" />
              <text>{{item.username}}（{{item.role}}）</text>
            </label>
          </block>
        </checkbox-group>
      </view>
    </view>

    <button class="primary" bindtap="submit">保存</button>
  </view>
</view>